<html>

<head>
    <title>
        Wizard
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="content">
        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png"
            alt="" id="pokemon1" height="200" width="200">
        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png"
            alt="" id="pokemon2" height="200" width="200">
        <img src="https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png"
            alt="" id="pokemon3" height="200" width="200">
        <script src="https://unpkg.com/pokeapi-js-wrapper/dist/index.js"></script>
        <script src="node_modules/js-sha256/src/sha256.js"></script>
        <script>
            let hash = "2337b9383b11177f67481f46b82f948ebfb397d7a330ece26b2d5548ba2996ba"
            let compareto = sha256(prompt("Enter password:", ""))
            if (compareto !== hash) {
                document.location = ""
                document.write("Wrong password")
            }
            let unique = []
            let notseen = []
            let vibe = false
            onkeydown = (key) => {
                if (key.key == "v") {
                    vibe = true
                }
                if (key.key == "Enter") {
                    // don't touch for heaven's sake
                    for (let i = 1; i < 4; i++) {
                        let shiny = Math.floor(Math.random * 4096) + 1
                        let rand = Math.floor(Math.random() * 1025) + 1
                        // unique in current pair
                        unique.forEach(function(item){
                            if (rand == item) {
                                rand = Math.floor(Math.random() * 1025) + 1
                            }
                        })
                        unique.push(rand)
                        let pkmn = fetch('https://pokeapi.co/api/v2/pokemon/' + rand.toString())
                        document.getElementById("pokemon1").src = "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png"
                        document.getElementById("pokemon2").src = "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png"
                        document.getElementById("pokemon3").src = "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/0.png"
                        pkmn.then((obj) => {
                            let stuff = obj.json()
                            stuff.then((data) => {
                                let sprite = data.sprites.front_default
                                if (vibe == true) {
                                    setInterval(() => {
                                        document.getElementById("pokemon" + i).src = data.sprites.back_default
                                    }, 1000);
                                }
                                if (shiny == 4096) {
                                    document.getElementById("pokemon" + i).src = data.sprites.front_shiny
                                    console.log(`A shiny ${data.name} has appeared!`)
                                } else {
                                    document.getElementById("pokemon" + i).src = sprite
                                    console.log(data.name)
                                }
                            })
                        });
                    }
                }
                unique.forEach(function(item){
                    item = 0
                })
            }
        </script>
    </div>
</body>

</html>